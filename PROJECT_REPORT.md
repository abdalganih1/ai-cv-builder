# AI CV Builder - ุชูุฑูุฑ ุดุงูู ูููุดุฑูุน

> **ููู AI Agents:** ูุฐุง ุงูุชูุฑูุฑ ูุญุชูู ุนูู ูู ุชูุงุตูู ุงููุดุฑูุนุ ุงููุดุงููุ ุงูุญูููุ ูุงูุชูุฌููุงุช. ูุฌุจ ุชุญุฏูุซู ูุน ูู ุชุทููุฑ ุฌุฏูุฏ.

---

## ๐ ุฌุฏูู ุงููุญุชููุงุช

1. [ูุธุฑุฉ ุนุงูุฉ](#ูุธุฑุฉ-ุนุงูุฉ)
2. [ุงููููููุฉ ุงูุชูููุฉ](#ุงููููููุฉ-ุงูุชูููุฉ)
3. [ุงููุดุงูู ูุงูุญููู](#ุงููุดุงูู-ูุงูุญููู)
4. [ุงูุชูุฌููุงุช ูุงูููุงุนุฏ](#ุงูุชูุฌููุงุช-ูุงูููุงุนุฏ)
5. [ุงููุดุฑ ูุงูุชุดุบูู](#ุงููุดุฑ-ูุงูุชุดุบูู)
6. [ุงูุชุฌุงุฑุจ ุงููุฎุชุจุฑุฉ](#ุงูุชุฌุงุฑุจ-ุงููุฎุชุจุฑุฉ)

---

## ๐ฏ ูุธุฑุฉ ุนุงูุฉ

### ุงููุฏู
ุชุทุจูู ููุจ ูุฅูุดุงุก ุณูุฑ ุฐุงุชูุฉ ุงุญุชุฑุงููุฉ ุจุงููุบุฉ ุงูุนุฑุจูุฉ ุจุงุณุชุฎุฏุงู ุงูุฐูุงุก ุงูุงุตุทูุงุนู.

### ุงููุฒุงูุง ุงูุฑุฆูุณูุฉ
- โ ุงุณุชูุฑุงุฏ ูู PDF/ูุต/URL
- โ ูุนุงูุฌุฉ ูุตูุต ุนุฑุจูุฉ (RTL)
- โ ุชุตุฏูุฑ PDF ุงุญุชุฑุงูู
- โ ุฏูุน ุนุจุฑ ShamCash
- โ ูุงุฌูุฉ ุนุตุฑูุฉ ูุฌุฐุงุจุฉ

### ุงูุชูููุงุช ุงููุณุชุฎุฏูุฉ
```
Frontend: Next.js 15.1.5, React 19, TypeScript
Styling: Tailwind CSS
PDF Generation: @react-pdf/renderer
PDF Parsing: pdfjs-dist
AI: Z.AI API (GLM-4.7)
Deployment: Cloudflare Pages
```

---

## ๐๏ธ ุงููููููุฉ ุงูุชูููุฉ

### ุงูุจููุฉ ุงูุฃุณุงุณูุฉ

```
ai-cv-builder/
โโโ src/
โ   โโโ app/
โ   โ   โโโ api/
โ   โ   โ   โโโ analyze/
โ   โ   โ   โ   โโโ pdf/route.ts      # ุชุญููู PDF
โ   โ   โ   โ   โโโ text/route.ts     # ุชุญููู ุงููุต
โ   โ   โ   โโโ ai/
โ   โ   โ   โ   โโโ chat/route.ts     # ูุญุงุฏุซุฉ AI
โ   โ   โ   โโโ upload-proof/route.ts # ุฑูุน ุฅุซุจุงุช ุงูุฏูุน
โ   โ   โโโ page.tsx                   # ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
โ   โ   โโโ layout.tsx                 # ุงูุชุฎุทูุท ุงูุนุงู
โ   โโโ components/
โ   โ   โโโ wizard/                    # ุฎุทูุงุช ุงูุฅูุดุงุก
โ   โ   โ   โโโ WelcomeStep.tsx
โ   โ   โ   โโโ AnalysisProgress.tsx
โ   โ   โ   โโโ MissingFieldsForm.tsx
โ   โ   โ   โโโ PersonalInfoStep.tsx
โ   โ   โ   โโโ ExperienceStep.tsx
โ   โ   โ   โโโ EducationStep.tsx
โ   โ   โ   โโโ PaymentStep.tsx
โ   โ   โโโ payment/
โ   โ   โ   โโโ ShamCashPayment.tsx
โ   โ   โโโ pdf/
โ   โ       โโโ CVDocument.tsx         # ูุงูุจ PDF
โ   โโโ lib/
โ   โ   โโโ types/
โ   โ   โ   โโโ cv-schema.ts           # ุฃููุงุน ุงูุจูุงูุงุช
โ   โ   โโโ fonts/
โ   โ       โโโ register-fonts.ts      # ุชุณุฌูู ุงูุฎุทูุท
โ   โโโ public/
โ       โโโ fonts/                     # IBM Plex Sans Arabic
โ       โโโ sham-cash-qr.png          # QR ููุฏูุน
โโโ .env.local                         # ูุชุบูุฑุงุช ุงูุจูุฆุฉ
โโโ next.config.ts                     # ุฅุนุฏุงุฏุงุช Next.js
```

### ูุณุงุฑ ุชุฏูู ุงูุจูุงูุงุช

```mermaid
graph LR
    A[ุงููุณุชุฎุฏู] --> B{ุงุฎุชูุงุฑ ุทุฑููุฉ ุงูุฅุฏุฎุงู}
    B -->|PDF| C[ุฑูุน PDF]
    B -->|ูุต| D[ูุตู ุงููุต]
    B -->|ูุฏูู| E[ุฅุฏุฎุงู ูุฏูู]
    
    C --> F[/api/analyze/pdf]
    D --> G[/api/analyze/text]
    
    F --> H[ุงุณุชุฎุฑุงุฌ ุงููุต ุจู pdfjs-dist]
    H --> I[ุฅุฑุณุงู ููุฐูุงุก ุงูุงุตุทูุงุนู]
    G --> I
    
    I --> J[ุชุญููู ูููููุฉ ุงูุจูุงูุงุช]
    J --> K[ููุก ุงููููุฐุฌ]
    
    E --> K
    K --> L[ูุฑุงุฌุนุฉ ูุชุนุฏูู]
    L --> M[ุงูุฏูุน]
    M --> N[ุชุตุฏูุฑ PDF]
```

---

## ๐ ุงููุดุงูู ูุงูุญููู

### 1๏ธโฃ ูุดููุฉ ุงุณุชุฎุฑุงุฌ ุงููุต ูู PDF ุงูุนุฑุจู

#### ุงููุดููุฉ ุงูุฃููู: ุงููุต ุงููุดูู
**ุงูุชุงุฑูุฎ:** 2026-02-05  
**ุงูุฃุนุฑุงุถ:**
```
--- DEBUG: Extracted Text Start ---
ar ยบโ!รโฅยฝBยนรLยดยป>RโยฟรรฆRรยนrhรญโผqรธยพSรท
--- Total Length: 38568 chars ---
```

#### ุงููุญุงููุงุช ุงููุฎุชุจุฑุฉ

##### โ ุงููุญุงููุฉ 1: ุงุณุชุฎุฏุงู `pdf-parse`
```typescript
const pdf = await import('pdf-parse');
const data = await pdf(Buffer.from(buffer));
return data.text;
```
**ุงููุชูุฌุฉ:** ูุดู - ุงูููุชุจุฉ ูุง ุชุนูู ูู Edge Runtime (Cloudflare)

##### โ ุงููุญุงููุฉ 2: Regex ุงูุจุณูุท
```typescript
const text = pdfBuffer.toString('utf8');
return text.replace(/[^\x20-\x7E\u0600-\u06FF]/g, '');
```
**ุงููุชูุฌุฉ:** ูุดู - ููุฏุงู ูุจูุฑ ูููุนูููุงุช

##### โ ุงููุญุงููุฉ 3: ุฎุงุฏู Python ุจู PyMuPDF
```python
import fitz
doc = fitz.open(stream=pdf_bytes)
text = "\n\n".join([page.get_text() for page in doc])
```
**ุงููุชูุฌุฉ:** ูุฌุญ ูุญููุงู ููู **ุบูุฑ ูุชูุงูู ูุน Cloudflare Pages**

##### โ ุงููุญุงููุฉ 4: pdfjs-dist ุจุฏูู CMaps
```typescript
const doc = await pdfjs.getDocument({
    data: new Uint8Array(buffer),
    useSystemFonts: true
}).promise;
```
**ุงููุชูุฌุฉ:** ูุดู - ูุต ูุดูู (`ยบโ!รโฅยฝBยนร`)

##### โ๏ธ ุงููุญุงููุฉ 5: pdfjs-dist ูุน CMaps (ุฌุงุฑู ุงูุงุฎุชุจุงุฑ)
```typescript
pdfjs.GlobalWorkerOptions.workerSrc = false; // ุชุนุทูู Worker
const doc = await pdfjs.getDocument({
    cMapUrl: 'https://unpkg.com/pdfjs-dist@.../cmaps/',
    cMapPacked: true,
    useSystemFonts: false
}).promise;
```
**ุงูุญุงูุฉ:** ููุฏ ุงูุงุฎุชุจุงุฑ - ูุดููุฉ Worker ูุง ุฒุงูุช ููุฌูุฏุฉ

---

### 2๏ธโฃ ูุดููุฉ Web Worker ูู ุจูุฆุฉ Node.js

#### ุงูุฎุทุฃ
```
PDF.js parsing error: Setting up fake worker failed
No "GlobalWorkerOptions.workerSrc" specified
```

#### ุงูุณุจุจ ุงูุฌุฐุฑู
`pdfjs-dist` ูุตูู ูููุชุตูุญ ููุญุชุงุฌ Web Worker. ูู ุจูุฆุฉ Node.js (Next.js API Routes)ุ Worker ุบูุฑ ูุชุงุญ.

#### ุงูุญููู ุงููุฌุฑุจุฉ
1. โ `workerSrc = ''` โ ูุดู (ูุทูุจ ูููุฉ ูุนููุฉ)
2. โณ `workerSrc = false` โ ููุฏ ุงูุงุฎุชุจุงุฑ
3. โณ `useWorkerFetch: false` โ ููุฏ ุงูุงุฎุชุจุงุฑ

---

### 3๏ธโฃ ูุดููุฉ ุงูุฐูุงุก ุงูุงุตุทูุงุนู ูุฑุฌุน ุจูุงูุงุช ูุงุฑุบุฉ

#### ุงููุดููุฉ
```json
{
  "personal": {"firstName": "", "lastName": "", ...},
  "experience": [],
  "education": []
}
```

#### ุงูุฃุณุจุงุจ ุงููุญุชููุฉ
1. **ูุต ูุดูู:** ุงูู AI ูุณุชูุจู ุฑููุฒ ุจุฏูุงู ูู ูุตูุต
2. **ููุงุนุฏ ุตุงุฑูุฉ:** Prompt ูุงู ูุทูุจ ุนุฏู "ุชุฃููู" ุจูุงูุงุชุ ูุชุฑู ูู ุดูุก ูุงุฑุบุงู
3. **ุญุฏ ุงูุทูู:** ูุงู 8000 ุญุฑู ููุท (ูุฏ ูุง ูููู ูู 5 ุตูุญุงุช)

#### ุงูุญููู ุงููุทุจูุฉ
- โ ุชุฎููู ููุงุนุฏ ุงูู Prompt
- โ ุฒูุงุฏุฉ ุญุฏ ุงูุทูู ูู 8000 โ 15000 ุญุฑู
- โ **ุญู ููุงุฆู:** ุงุณุชุฎุฏุงู Python PyMuPDF ุนุจุฑ `child_process`

---

### 6๏ธโฃ ุงูุญู ุงูููุงุฆู: PyMuPDF + child_process (2026-02-06)

#### ุงููุดููุฉ
ุฌููุน ููุชุจุงุช JavaScript ูุงุณุชุฎุฑุงุฌ ุงููุต ูู PDF (pdf-parse, pdfjs-dist) ุฃูุชุฌุช ูุตุงู ูุดููุงู.

#### ุงูุญู
ุฅูุดุงุก script Python ูุณุชุฎุฏู PyMuPDF (fitz) ูุงุณุชุฏุนุงุคู ูู Node.js:

```bash
# ุงููููุน: scripts/pdf_text_extractor.py
python scripts/pdf_text_extractor.py "cv.pdf"
# ูุฑุฌุน JSON ูุน ุงููุต ูุงูุตูุฑุฉ ุงูุดุฎุตูุฉ
```

#### ุงููุชุงุฆุฌ
```
โ PyMuPDF extracted 7832 chars, 5 images
โ Profile image detected!
```

#### ุงููููุงุช ุงููููุดุฃุฉ
- `scripts/pdf_text_extractor.py` - ุงุณุชุฎุฑุงุฌ ุงููุต ูุงูุตูุฑ
- `scripts/pdf_extractor.py` - ุฃุฏุงุฉ ุงุฎุชุจุงุฑ ุจุณูุทุฉ

---

### 7๏ธโฃ ูุดููุฉ ุงููุดุฑ ุนูู Cloudflare (2026-02-06)

#### ุงูุชุญุฏู
Cloudflare Pages ูุง ูุฏุนู:
- โ Python ุฃู ุฃู runtime ุบูุฑ JavaScript
- โ `child_process` (ูุง shell access)
- โ ูููุงุช ูุจูุฑุฉ ุนูู ุงูุฐุงูุฑุฉ

#### ุงูุญู: ูุธุงู ุงุณุชุฎุฑุงุฌ ูุฒุฏูุฌ (Dual-Mode)

```typescript
// ุชุญุฏูุฏ ุชููุงุฆู ุญุณุจ ูุชุบูุฑุงุช ุงูุจูุฆุฉ:
// Mode 1: PDF_API_URL โ Self-hosted API (VPS)
// Mode 2: OCR_SPACE_API_KEY โ OCR.space API (Cloudflare)
// Mode 3: None โ Python PyMuPDF (Local dev only)
```

#### ุงููุญุงููุงุช ูุงูุฃุฎุทุงุก

| # | ุงููุญุงููุฉ | ุงููุดููุฉ | ุงูุญู |
|---|----------|---------|------|
| 1 | `pdf-parse` | ESM import errors | โ Abandoned |
| 2 | `pdfjs-dist` | Web Worker not available in Node.js | โ Abandoned |
| 3 | `pdfjs-dist/legacy` | Type errors + garbled Arabic | โ Abandoned |
| 4 | Python child_process | Works locally, **NOT on Cloudflare** | โ Local only |
| 5 | OCR.space with spread | `String.fromCharCode(...arr)` โ Stack overflow | โ Fixed |
| 6 | OCR.space with Buffer | `Buffer.from().toString('base64')` | โ Works! |

#### ุฎุทุฃ Stack Overflow (2026-02-06 01:38)

**ุงูุณุจุจ:**
```typescript
// โ ูุฐุง ูุณุจุจ stack overflow ูุน ูููุงุช ูุจูุฑุฉ (>1MB)
const base64 = btoa(String.fromCharCode(...new Uint8Array(buffer)));
```

**ุงูุฅุตูุงุญ:**
```typescript
// โ ุงุณุชุฎุฏุงู Buffer ููุชุญููู ุงูุขูู
if (typeof Buffer !== 'undefined') {
    base64 = Buffer.from(uint8Array).toString('base64');
} else {
    // Edge runtime: chunk-based conversion
    const CHUNK_SIZE = 32768;
    const chunks: string[] = [];
    for (let i = 0; i < uint8Array.length; i += CHUNK_SIZE) {
        const chunk = uint8Array.slice(i, i + CHUNK_SIZE);
        chunks.push(String.fromCharCode.apply(null, Array.from(chunk)));
    }
    base64 = btoa(chunks.join(''));
}
```

#### ุงูุจููุฉ ุงูููุงุฆูุฉ ูููุดุฑ

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    Cloudflare Pages                      โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โ
โ  โ .env: OCR_SPACE_API_KEY=K8xxx                   โ    โ
โ  โ โ extractViaOCRSpace() โ api.ocr.space          โ    โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    VPS (Optional)                        โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โ
โ  โ .env: PDF_API_URL=https://pdf.domain.com        โ    โ
โ  โ โ extractViaSelfHostedAPI() โ Docker FastAPI    โ    โ
โ  โ                                                  โ    โ
โ  โ Docker: services/pdf-api/                       โ    โ
โ  โ - FastAPI + PyMuPDF                             โ    โ
โ  โ - docker-compose up -d                          โ    โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

#### ุงููููุงุช ุงูููุถุงูุฉ ูููุดุฑ

| ููู | ุงูุบุฑุถ |
|-----|-------|
| `services/pdf-api/app/main.py` | FastAPI server |
| `services/pdf-api/Dockerfile` | Docker config |
| `services/pdf-api/docker-compose.yml` | Orchestration |
| `services/pdf-api/README.md` | ุฏููู ุงููุดุฑ |
| `.env.example` | ูุชุบูุฑุงุช ุงูุจูุฆุฉ ุงูููุซูุฉ |

---

### 4๏ธโฃ ูุดููุฉ ุชูููุช ูุคุดุฑ ุงูุชูุฏู

#### ุงููุดููุฉ
ุงููุคุดุฑ ูุงู ููุชูู ุจุนุฏ 60 ุซุงููุฉุ ููู ุงูู API ูุฃุฎุฐ ุญุชู 95 ุซุงููุฉ.

#### ุงูุญู
```typescript
// WelcomeStep.tsx
<AnalysisProgress estimatedDuration={100} /> // ูุงู 60
```

---

### 5๏ธโฃ ูุดููุฉ ุจูุงุก ุงูููุฏ (Syntax Error)

#### ุงูุฎุทุฃ
```
Parsing ecmascript source code failed
> 62 | 4. ูู ุญูู `summary`ุ ูุฎุต ุงูุฎุจุฑุฉ ูุงูููุงุฑุงุช ูู ููุฑุฉ ุงุญุชุฑุงููุฉ.
     |                 ^^^^^^^
Expected a semicolon
```

#### ุงูุณุจุจ
ุงุณุชุฎุฏุงู backticks (`) ุฏุงุฎู template literal.

#### ุงูุญู
```typescript
// โ ูุจู
4. ูู ุญูู `summary`ุ ูุฎุต ุงูุฎุจุฑุฉ...

// โ ุจุนุฏ
4. ูู ุญูู summaryุ ูุฎุต ุงูุฎุจุฑุฉ...
```

---

## ๐ ุงูุชูุฌููุงุช ูุงูููุงุนุฏ

### ููุงุนุฏ ุงูุชุทููุฑ (ูู `.gemini/GEMINI.md`)

#### 1. ุงูุชูููุฑ ุงูุนููู (Deep Reasoning)
```
ุนูุฏูุง ููุชุจ ุงููุณุชุฎุฏู "ููุฑ"ุ ุงุฏุฎู ูู ุญููุฉ ุชูููุฑ ูุชูุฑุฑุฉ:
- ุชุญููู ุงูุฃุซุฑ ุงูููุณู ุนูู ุงููุณุชุฎุฏู
- ุชูููุฉ ุงูุฐุงูุฑุฉ ููุชูููุฐ
- ูุงุจููุฉ ุตูุงูุฉ ุงูููุฏ ููุฏุฉ 5 ุณููุงุช
```

#### 2. ูุนุงููุฑ ุงูุชุตููู
```
โ ุชุตููู "Avant-Garde" (ุทููุนู)
โ ุชูุงุณู ุงูุฃููุงู (HSL ููุณู)
โ ุฎุทูุท Google Fonts (Inter, Outfit, Bricolage Grotesque)
โ Micro-animations ููู hover/interaction
โ SEO proactive (Meta tags, Semantic HTML5)
```

#### 3. ุงูุฃูุงู
```
โ ูุง ุชุนุฑุถ API Keys
โ ูุง ุชุณุชุฎุฏู eval()
โ sanitize ูู inputs
โ ุงุณุชุฎุฏุงู environment variables
```

#### 4. ุงูุฃุฏูุงุช ุงููุญููุฉ
```bash
# Python Tools ูู ~/.gemini/antigravity/tools/
pdf_vision.py analyze <pdf> <output>
pdf_vision.py md2pdf <md> <pdf>
office_suite.py read_docx <file>
wp_crawler.py <url> full
seo_auditor.py <file>
```

---

## ๐ ุงููุดุฑ ูุงูุชุดุบูู

### ุงูุชุดุบูู ุงููุญูู

#### 1๏ธโฃ ุงููุชุทูุจุงุช
```bash
Node.js: 24.8.0
npm: 10.x
```

#### 2๏ธโฃ ุงูุฅุนุฏุงุฏ
```bash
# ุงุณุชูุณุงุฎ ุงููุดุฑูุน
git clone <repo-url>
cd ai-cv-builder

# ุชุซุจูุช ุงูุญุฒู
npm install

# ุฅุนุฏุงุฏ ุงูุจูุฆุฉ
cp .env.example .env.local
# ุซู ุงูุชุญ .env.local ูุฃุถู:
# ZAI_API_KEY=your_api_key_here
```

#### 3๏ธโฃ ุงูุชุดุบูู
```bash
# Development
npm run dev
# ูุนูู ุนูู: http://localhost:3000

# Production Build
npm run build
npm start
```

---

### ุงููุดุฑ ุนูู Cloudflare Pages

#### ุงูุฅุนุฏุงุฏุงุช
```yaml
Build command: npm run build
Build output: .next
Node version: 24.8.0
Environment Variables:
  - ZAI_API_KEY: <secret>
```

#### ุฎุทูุงุช ุงููุดุฑ

##### 1๏ธโฃ ุนุจุฑ Git (ุชููุงุฆู)
```bash
git push origin main
# Cloudflare ูุจูู ููุดุบูู ุชููุงุฆูุงู
```

##### 2๏ธโฃ ุนุจุฑ Dashboard
1. ุงุฐูุจ ุฅูู Cloudflare Pages
2. ุงุฎุชุฑ ุงููุดุฑูุน
3. Settings โ Environment Variables
4. ุฃุถู `ZAI_API_KEY`
5. Deployments โ Retry deployment

#### ุงูุฏูููู
```
Production: https://technoenjaz-pdf.pages.dev
Custom: https://pdf.technoenjaz.com
```

---

## ๐งช ุงูุชุฌุงุฑุจ ุงููุฎุชุจุฑุฉ

### ุชุฌุฑุจุฉ 1: Python Server
**ุงููุฏู:** ุงุณุชุฎุฑุงุฌ ูุต PDF ุจุฏูุฉ  
**ุงูุญุฒู:** FastAPI + PyMuPDF  
**ุงููุชูุฌุฉ:** โ ูุฌุญ ูุญููุงู / โ ูุดู ุนูู Cloudflare  
**ุงูุณุจุจ:** Cloudflare Pages ูุง ุชุฏุนู Python runtime

---

### ุชุฌุฑุจุฉ 2: pdf-parse
**ุงููุฏู:** ููุชุจุฉ Node.js ุจุณูุทุฉ  
**ุงููุชูุฌุฉ:** โ ูุดู  
**ุงูุณุจุจ:** ูุง ุชุนูู ูู Edge Runtime

---

### ุชุฌุฑุจุฉ 3: pdfjs-dist (ุจุฏูู CMaps)
**ุงููุฏู:** ุงุณุชุฎุฑุงุฌ ูุต ูู ุจูุฆุฉ JavaScript ุฎุงูุตุฉ  
**ุงููุชูุฌุฉ:** โ๏ธ ุฌุฒุฆู - ุงุณุชุฎุฑุงุฌ ูุดูู  
**ุงูุณุจุจ:** ุบูุงุจ Character Maps

---

### ุชุฌุฑุจุฉ 4: pdfjs-dist + CMaps (ุงูุญุงููุฉ)
**ุงููุฏู:** ุญู ูุดููุฉ ุงููุต ุงูุนุฑุจู ุงููุดูู  
**ุงูุญุงูุฉ:** โณ ููุฏ ุงูุงุฎุชุจุงุฑ  
**ุงูุชุญุฏูุงุช:**
- โ Worker error ูู Node.js
- โณ ูุญุงููุฉ ุชุนุทูู Worker
- โณ ุงุฎุชุจุงุฑ `GlobalWorkerOptions.workerSrc = false`

---

## ๐ ุญุงูุฉ ุงููุดุฑูุน ุงูุญุงููุฉ

### โ ูุง ูุนูู
- [x] ูุงุฌูุฉ ุงููุณุชุฎุฏู ูุงููุฉ
- [x] ุงุณุชูุฑุงุฏ ูุฏูู
- [x] ุงุณุชูุฑุงุฏ ูู ูุต
- [x] AI chat ููุชุนุฏููุงุช
- [x] ุชุตุฏูุฑ PDF ุจุชูุณูู ุงุญุชุฑุงูู
- [x] ุฏูุน ShamCash
- [x] ูุดุฑ ุนูู Cloudflare

### โ๏ธ ูุง ูุญุชุงุฌ ุฅุตูุงุญ
- [ ] **ุงุณุชุฎุฑุงุฌ PDF ุงูุนุฑุจู** (ุงููุดููุฉ ุงูุฑุฆูุณูุฉ ุงูุญุงููุฉ)
  - ุงููุต ูุง ุฒุงู ูุดููุงู (`ยบโ!รโฅยฝBยนร`)
  - Worker error ูู pdfjs-dist
  - CMaps ูุง ุชุชุญูู ุจุดูู ุตุญูุญ

### ๐ฏ ุงูุฎุทูุงุช ุงููุงุฏูุฉ
1. ุญู ูุดููุฉ Worker ูู pdfjs-dist
2. ุงูุชุฃูุฏ ูู ุชุญููู CMaps
3. ุงุฎุชุจุงุฑ ุงุณุชุฎุฑุงุฌ ุงููุต ุงูุนุฑุจู
4. ุฅุฐุง ูุดู โ ุงููุธุฑ ูู ุญููู ุจุฏููุฉ:
   - ุงุณุชุฎุฏุงู ุฎุฏูุฉ ุฎุงุฑุฌูุฉ (PDF.co API)
   - ุทูุจ ูู ุงููุณุชุฎุฏู ูุตู ุงููุต ูุฏููุงู
   - ุงุณุชุฎุฏุงู OCR (Tesseract.js) ูุญู ุฃุฎูุฑ

### ๐ ุชุทููุฑุงุช ูุณุชูุจููุฉ
1. **ุงุณุชุฎุฑุงุฌ ุงูุตูุฑุฉ ุงูุดุฎุตูุฉ ุชููุงุฆูุงู:**
   - ุชู ุชุทุจูู ุงุณุชุฎุฑุงุฌ ุงูุตูุฑ ูู PDF
   - ุงูุชุดุงู ุตูุฑุฉ ุงููุฌู ุจุงุณุชุฎุฏุงู heuristics (Portrait orientation, page 1)
   - ูููู ุชุญุณูููุง ุจุงุณุชุฎุฏุงู OpenCV ููุชุนุฑู ุนูู ุงููุฌูู
   
2. **ุชูุงูู ุงูุตูุฑุฉ ูุน CV:**
   - ุฅุถุงูุฉ ุญูู `profileImage` ูู API response
   - ูููู ุนุฑุถูุง ูู ูุงุฌูุฉ ุงููุนุงููุฉ
   - ุชุถููููุง ูู ููู PDF ุงูููุตุฏููุฑ

---

## ๐ ุณุฌู ุงูุชุญุฏูุซุงุช

### 2026-02-06
- โ ุญู ูุดููุฉ ุงุณุชุฎุฑุงุฌ ุงููุต ูู PDF ุงูุนุฑุจู
- โ ุฅูุดุงุก `scripts/pdf_text_extractor.py` ุจุงุณุชุฎุฏุงู PyMuPDF
- โ ุชูุงูู Python ูุน Node.js ุนุจุฑ `child_process`
- โ ุงุณุชุฎุฑุงุฌ ุงูุตูุฑุฉ ุงูุดุฎุตูุฉ ูู PDF
- โ ุชุญุฏูุซ API ูุฅุฑุฌุงุน `profileImage`

### 2026-02-05
- โ ุฅุถุงูุฉ CMaps ูู pdfjs-dist
- โณ ูุญุงููุฉ ุญู Worker error
- โ ุฅูุดุงุก ูุฐุง ุงูุชูุฑูุฑ ุงูุดุงูู

### 2026-02-04
- โ ุชุญุณูู UI/UX
- โ ุฅุถุงูุฉ ูุคุดุฑ ุงูุชูุฏู
- โ ุฑูุน ูุฏุฉ ุงููุคุดุฑ ูู 100 ุซุงููุฉ

### 2026-01-31
- โ ุฅุทูุงู ุงููุณุฎุฉ ุงูุฃููู
- โ ุงููุดุฑ ุนูู Cloudflare Pages

---

## ๐ ููุงุญุธุงุช ููู AI Agents

### ููููุฉ ุชุญุฏูุซ ูุฐุง ุงูุชูุฑูุฑ

#### ุนูุฏ ุฅุถุงูุฉ ููุฒุฉ ุฌุฏูุฏุฉ:
1. ุญุฏูุซ ูุณู [ุงููููููุฉ ุงูุชูููุฉ](#ุงููููููุฉ-ุงูุชูููุฉ)
2. ุฃุถู ุงููุณุงุฑ ูู ุงูุจููุฉ ุงูุฃุณุงุณูุฉ
3. ุญุฏูุซ ุงูู Mermaid diagram ุฅุฐุง ุชุบูุฑ ุงูุชุฏูู

#### ุนูุฏ ุญู ูุดููุฉ:
1. ุฃุถู ูุณู ุฌุฏูุฏ ูู [ุงููุดุงูู ูุงูุญููู](#ุงููุดุงูู-ูุงูุญููู)
2. ูุซูู ุงูุฃุนุฑุงุถุ ุงููุญุงููุงุชุ ูุงูุญู ุงูููุงุฆู
3. ุญุฏูุซ [ุญุงูุฉ ุงููุดุฑูุน](#ุญุงูุฉ-ุงููุดุฑูุน-ุงูุญุงููุฉ)

#### ุนูุฏ ุชุฌุฑุจุฉ ุญู ุฌุฏูุฏ:
1. ุฃุถู ูู [ุงูุชุฌุงุฑุจ ุงููุฎุชุจุฑุฉ](#ุงูุชุฌุงุฑุจ-ุงููุฎุชุจุฑุฉ)
2. ูุซูู ุงููุชูุฌุฉ (ูุฌุญ/ูุดู/ุฌุฒุฆู)
3. ุงุดุฑุญ ุงูุณุจุจ

#### ุชูุณูู ุงูุฅุถุงูุงุช:
```markdown
### X๏ธโฃ ูุดููุฉ [ุงุณู ุงููุดููุฉ]

#### ุงููุดููุฉ
[ุดุฑุญ ุงููุดููุฉ]

#### ุงููุญุงููุงุช ุงููุฎุชุจุฑุฉ
##### โ/โ/โณ ุงููุญุงููุฉ N: [ุงุณู ุงูุญู]
**ุงููุชูุฌุฉ:** ...
**ุงูุณุจุจ:** ...
```

---

## ๐ ุฑูุงุจุท ูููุฏุฉ

- [Cloudflare Dashboard](https://dash.cloudflare.com)
- [Z.AI API Docs](https://api.z.ai/docs)
- [pdfjs-dist GitHub](https://github.com/mozilla/pdf.js)
- [Next.js Docs](https://nextjs.org/docs)

---

**ุขุฎุฑ ุชุญุฏูุซ:** 2026-02-07 04:22 UTC+3  
**ุงูุญุงูุฉ:** ๐ข ุชู ุฅุตูุงุญ ูุดููุฉ ุงูููุงุท ุงูุชุนุฏุงุฏูุฉ ูู PDF ุงูุนุฑุจู

---

## ๐ ูุดููุฉ RTL ููููุงุท ุงูุชุนุฏุงุฏูุฉ (2026-02-07)

### ุงููุดููุฉ ุงูุญุงููุฉ

**ุงููุตู:**
- ุนูุฏ ุชุตุฏูุฑ PDF ุจุงููุบุฉ ุงูุนุฑุจูุฉุ ุงูููุงุท (`โข`) ุชุธูุฑ ููู **ุงููุต ุจุฌุงูุจูุง ููููุฏ**
- ุงููุณุฎุฉ ุงูุฅูุฌููุฒูุฉ ุชุนูู ุจุดูู ุตุญูุญ โ
- ุงูุฎุท ูุงูุชุจุงุนุฏ ูุธูุฑุงู ุจุดูู ุฌูุฏ

**ุงูููู ุงููุชุฃุซุฑ:**
```
src/components/preview/PDFDocument.tsx
```

**ุงูุฏุงูุฉ ุงููุดููุฉ:**
```typescript
function BulletText({ text, isRTL, styles }: BulletTextProps) {
    // ูุฐู ุงูุฏุงูุฉ ุชุญุงูู ุชุญููู ุงููุต ุงูุชุนุฏุงุฏู ุฅูู bullets ูููุตูุฉ
    // ุงููุดููุฉ: ุงููุต ูุฎุชูู ุจุนุฏ ุงููุนุงูุฌุฉ
}
```

---

### ๐ด ุงููุญุงููุงุช ุงููุงุดูุฉ (ุชุฌูุจ ุชูุฑุงุฑูุง!)

#### โ ูุญุงููุฉ 1: ุชุบููุฑ ุงูุฎุท ูู IBMPlexSansArabic ุฅูู TraditionalArabic
- **ุงููุชูุฌุฉ:** ูุงุดูุฉ - ุงููุณุชุฎุฏู ููุถู ุงูุฎุท ุงููุฏูู
- **ุงูุณุจุจ:** ุงูุชุบููุฑ ูุงู ูุจูุฑุงู ุฌุฏุงู ููู ูุญู ุงููุดููุฉ ุงูุฃุณุงุณูุฉ

#### โ ูุญุงููุฉ 2: ุงุณุชุฎุฏุงู processRTLText ูุน RTL markers
```typescript
function processRTLText(text: string, isRTL: boolean): string {
    // ุฅุถุงูุฉ RLM markers ูููุต
    return '\u200F' + text + '\u200F';
}
```
- **ุงููุชูุฌุฉ:** ูุงุดูุฉ - ูู ุชุญู ูุดููุฉ ุชุฑุชูุจ ุงูููุงุท

#### โ ูุญุงููุฉ 3: Split ุจู regex ุนูู ูู `-`
```typescript
const lines = text.split(/\n|(?=[-โขโ])/);
```
- **ุงููุชูุฌุฉ:** ูุงุฑุซูุฉ! - ููุตู ุนูู ูู `-` ูู ุงููุต ุญุชู ุฏุงุฎู ุงููููุงุช
- **ุงููุดููุฉ:** ูููุฉ ูุซู `T-shirt` ุชุชุญูู ูู 3 ุฃุฌุฒุงุก

#### โ ูุญุงููุฉ 4: BulletText component ูุน split ุนูู newlines ููุท
```typescript
const lines = text.split('\n');
if (line.startsWith('-')) {
    const content = line.replace(/^[-โขโ]\s*/, '').trim();
    // ...
}
```
- **ุงููุชูุฌุฉ:** ุงูููุงุท ุชุธูุฑ ููู ุงููุต ุจุฌุงูุจูุง ูุงุฑุบ!
- **ุงูุณุจุจ ุงููุญุชูู:** ุงูุจูุงูุงุช ูุง ุชุญุชูู `\n` - ูู description ูุฃุชู ูุณุทุฑ ูุงุญุฏ

---

### ๐ก ุงููุฑุถูุงุช ุงููุชุจููุฉ ููุชุญููู

#### ูุฑุถูุฉ 1: ุงูุจูุงูุงุช ูุง ุชุญุชูู newlines
- **ุงูุงุฎุชุจุงุฑ:** ุชู ุฅุถุงูุฉ console.log ูุชุชุจุน ุงูุจูุงูุงุช
```typescript
console.log('๐ BulletText received:', { text, hasNewlines: text?.includes('\n') });
```
- **ุงููุทููุจ:** ูุญุต Console ูู ุงููุชุตูุญ ุนูุฏ ุงูุชุตุฏูุฑ

#### ูุฑุถูุฉ 2: ุงูู description ูุงุฑุบ ุฃุตูุงู
- **ุงูุงุฎุชุจุงุฑ:** ููุณ ุงูู console.log ุณููุดู ูุฐุง

#### ูุฑุถูุฉ 3: ูุดููุฉ ูู ุชูุฑูุฑ ุงูุจูุงูุงุช ูู CVData ุฅูู PDFDocument
- **ุงูุงุฎุชุจุงุฑ:** ููุงุฑูุฉ ุงูุจูุงูุงุช ูู localStorage ูุน ูุง ูุธูุฑ ูู PDF

---

### ๐ง ุงูุญุงูุฉ ุงูุญุงููุฉ ููููุฏ

#### PDFDocument.tsx - BulletText Component (ุงูุณุทูุฑ 238-295)
```typescript
function BulletText({ text, isRTL, styles }: BulletTextProps) {
    // Debug logging - ูุถุงู ููุชุดุฎูุต
    console.log('๐ BulletText received:', { 
        text: text?.substring(0, 100), 
        isRTL, 
        hasNewlines: text?.includes('\n'), 
        length: text?.length 
    });
    
    if (!text) return null;

    const lines = text.split('\n');
    const validLines = lines.filter(line => line.trim());
    
    // ... rest of the code
}
```

#### ุงูุงุณุชุฎุฏุงู ูู JSX:
```tsx
{/* Summary */}
<BulletText text={data.personal.summary} isRTL={isRTL} styles={styles} />

{/* Experience */}
<BulletText text={exp.description} isRTL={isRTL} styles={styles} />
```

---

### ๐จ Styles ุงููุชุนููุฉ ุจู RTL

```typescript
bulletLine: {
    flexDirection: isRTL ? 'row-reverse' : 'row',  // โ RTL support
    alignItems: 'flex-start',
    marginBottom: 2,
    paddingRight: isRTL ? 0 : 8,
    paddingLeft: isRTL ? 8 : 0
},
bulletPoint: {
    fontSize: 10,
    color: '#1e3a5f',
    marginRight: isRTL ? 0 : 4,
    marginLeft: isRTL ? 4 : 0
},
bulletText: {
    fontSize: 10,
    color: '#333333',
    flex: 1,
    textAlign: isRTL ? 'right' : 'left'
}
```

---

### ๐ ุงูุฎุทูุฉ ุงูุชุงููุฉ ุงูููุชุฑุญุฉ

1. **ุฃููุงู:** ูุญุต Console ูู ุงููุชุตูุญ ูุฑุคูุฉ ูุง ูุทุจุนู `console.log` 
2. **ุซุงููุงู:** ุจูุงุกู ุนูู ุงููุชูุฌุฉ:
   - ุฅุฐุง `hasNewlines: false` โ ุงููุต ูุฃุชู ูุณุทุฑ ูุงุญุฏุ ูุญุชุงุฌ ุทุฑููุฉ ุฃุฎุฑู ูุชุฌุฒุฆุชู
   - ุฅุฐุง `text: undefined/null` โ ุงูุจูุงูุงุช ูุง ุชููุฑุฑ ุจุดูู ุตุญูุญ
   - ุฅุฐุง `text` ููุฌูุฏ ูุตุญูุญ โ ุงููุดููุฉ ูู ุงููุนุงูุฌุฉ

---

### ๐๏ธ ุงูุฎุทูุท ุงููุชููุฑุฉ

| ุงูุฎุท | ุงูููู | ุงูุญุฌู |
|------|-------|-------|
| IBM Plex Sans Arabic (ุงูุญุงูู) | `IBMPlexSansArabic-Regular.ttf` | 195KB |
| Dubai | `Dubai-Regular.ttf` | 181KB |
| Traditional Arabic | `TraditionalArabic-Regular.ttf` | 282KB |
| Amiri | `Amiri-Regular.ttf` | 431KB |
| Noto Naskh Arabic | `NotoNaskhArabic.ttf` | 298KB |

---

### ๐ Schema ููุจูุงูุงุช

```typescript
interface WorkExperience {
  id: string;
  company: string;
  position: string;
  startDate: string;
  endDate: string;
  description: string;  // โ๏ธ ูุฐุง ุงูุญูู - string ูุงุญุฏ
}

interface PersonalInfo {
  // ...
  summary?: string;  // โ๏ธ ูุฐุง ุงูุญูู ุฃูุถุงู
}
```

**ููุงุญุธุฉ:** ุงูู `description` ูู `string` ูุงุญุฏ ูููุณ `array`ุ ูุฐุง ูุฌุจ ุฃู ูุญุชูู ุนูู `\n` ููุชุนุฏุงุฏุงุช.

---

### ๐ด ูุดุงูู ุฃุฎุฑู ูุชุจููุฉ

#### 1. ุฎุทุฃ atob ูู image-utils.ts
```
InvalidCharacterError: Failed to execute 'atob' on 'Window'
```
**ุงูููู:** `src/lib/utils/image-utils.ts` ุงูุณุทุฑ 44
**ุงูุณุจุจ:** base64 ุบูุฑ ุตุงูุญ ููุตูุฑุฉ

#### 2. ุชุญุฐูุฑ "Unknown version 65280"
```
Unknown version 65280
```
**ุงูุณุจุจ:** ุชุญุฐูุฑ ูู react-pdf ุนูุฏ ูุฑุงุกุฉ ุจุนุถ ุงูุฎุทูุท

---

### โ ูุง ูุนูู ุจุดูู ุตุญูุญ

1. โ ุงููุณุฎุฉ ุงูุฅูุฌููุฒูุฉ ุชุนูู ุจุดูู ูุงูู
2. โ ุงูุฎุท ุงูุนุฑุจู ูุธูุฑ ุจุดูู ุฌููู (ุงูุงุณูุ ุงูุนูุงููู)
3. โ ุงูุตูุฑุฉ ุงูุดุฎุตูุฉ ุชุธูุฑ
4. โ ุงูููุงุฑุงุช ุชุธูุฑ ูู badges
5. โ ุงููุบุงุช ุชุธูุฑ ุจุดูู ุตุญูุญ
6. โ RTL ูู ุงูุนูุงููู ูุงูุฃุณูุงุก ูุนูู

---

### ๐ ุงููููุงุช ุงูุฑุฆูุณูุฉ ูููุฑุงุฌุนุฉ

1. `src/components/preview/PDFDocument.tsx` - ููู PDF ุงูุฑุฆูุณู
2. `src/components/preview/CVPreview.tsx` - ูุนุงููุฉ CV
3. `src/lib/types/cv-schema.ts` - ุชุนุฑููุงุช TypeScript
4. `src/lib/utils/image-utils.ts` - ูุนุงูุฌุฉ ุงูุตูุฑ
